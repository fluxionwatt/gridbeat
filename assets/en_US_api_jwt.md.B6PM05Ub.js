import{_ as s,c as a,o as e,ah as t}from"./chunks/framework.DGOuNAW6.js";const c=JSON.parse('{"title":"Customize JWT","description":"","frontmatter":{},"headers":[],"relativePath":"en_US/api/jwt.md","filePath":"en_US/api/jwt.md"}'),n={name:"en_US/api/jwt.md"};function l(h,i,r,p,o,k){return e(),a("div",null,[...i[0]||(i[0]=[t(`<h1 id="customize-jwt" tabindex="-1">Customize JWT <a class="header-anchor" href="#customize-jwt" aria-label="Permalink to “Customize JWT”">​</a></h1><p>When calling APIs in GridBeat, you need to first call the login API to generate a JWT, and then call other APIs for JWT verification. The default expiration time of the generated JWT is one hour, and you can generate a JWT with a custom expiration time.</p><h2 id="what-is-jwt" tabindex="-1">What is JWT？ <a class="header-anchor" href="#what-is-jwt" aria-label="Permalink to “What is JWT？”">​</a></h2><p>JWT is an open standard (RFC 7519) for securely transmitting information. The JWT structure consists of three parts: the header, payload and signature.</p><p>GridBeat first searches for the corresponding .pem or .pub file under the <strong>certs</strong> subdirectory in the installation directory based on the <strong>iss</strong> field, and then verifies it based on the fields inside. The required JWT structure for GridBeat is as follows:</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">header</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;alg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;RS256&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;typ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;JWT&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">payload</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;iss&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;username&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;iat&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1679622798&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;exp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1679626398&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;aud&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gridbeat&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;bodyEncode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="header" tabindex="-1">Header <a class="header-anchor" href="#header" aria-label="Permalink to “Header”">​</a></h3><ul><li>typ: Using JWT</li><li>alg: Using RS256</li></ul><h3 id="payload" tabindex="-1">Payload <a class="header-anchor" href="#payload" aria-label="Permalink to “Payload”">​</a></h3><ul><li>iss: Defined it according to the requirements, but ensure that it is consistent with the filename of the generated public key file. For example, if the iss is &quot;gridbeat&quot;, the public key filename generated should be <code>gridbeat.pem</code>.</li><li>iat: Time of issuance.</li><li>exp: Expiration time of issuance.</li><li>aud: <code>gridbeat</code>, cannot be modified.</li></ul><h2 id="generate-public-and-private-keys" tabindex="-1">Generate public and private keys <a class="header-anchor" href="#generate-public-and-private-keys" aria-label="Permalink to “Generate public and private keys”">​</a></h2><p>Before issuing JWT, you need to generate a pair of public and private keys, and put the generated public key public.pem in the <strong>certs</strong> subdirectory of the GridBeat installation directory. GridBeat automatically loads files in the <strong>certs</strong> directory and decodes them according to the public key.</p><div class="tip custom-block"><p class="custom-block-title custom-block-title-default">TIP</p><p>The default installation path for Docker and deb/rpm installation packages is <code>/opt/gridbeat</code>.</p><p>The name of the public key file must be consistent with the issuer in the JWT.</p></div><p>Generate RSA keys using OpenSSL command-line tools:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># generate private key</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> genrsa</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> private.key</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2048</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># generate public key</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rsa</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> private.key</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> public.pem</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -pubout</span></span></code></pre></div><h2 id="how-to-generate-jwt" tabindex="-1">How to generate JWT? <a class="header-anchor" href="#how-to-generate-jwt" aria-label="Permalink to “How to generate JWT?”">​</a></h2><p>To generate a JWT, you can use the <a href="https://jwt.io/" target="_blank" rel="noreferrer">JWT official website</a> tool. Fill in the <strong>Decoded</strong> section as follows:</p><ul><li>Algorithm: RS256</li><li>Header: Header</li><li>Payload: Payload</li><li>Verify Signature: Fill in <code>-----BEGIN PUBLIC KEY-----</code> and <code>-----BEGIN RSA PRIVATE KEY-----</code>.</li></ul>`,18)])])}const g=s(n,[["render",l]]);export{c as __pageData,g as default};
