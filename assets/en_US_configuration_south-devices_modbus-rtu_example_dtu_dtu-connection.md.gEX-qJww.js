import{_ as t,c as i,o as n,ah as o,dR as r,dS as s,dT as a,dU as d,dV as l,dW as c,dX as h,dY as u}from"./chunks/framework.D2dsaVOY.js";const U=JSON.parse('{"title":"Connect to USR DTU","description":"","frontmatter":{},"headers":[],"relativePath":"en_US/configuration/south-devices/modbus-rtu/example/dtu/dtu-connection.md","filePath":"en_US/configuration/south-devices/modbus-rtu/example/dtu/dtu-connection.md"}'),p={name:"en_US/configuration/south-devices/modbus-rtu/example/dtu/dtu-connection.md"};function g(m,e,b,f,T,v){return n(),i("div",null,[...e[0]||(e[0]=[o('<h1 id="connect-to-usr-dtu" tabindex="-1">Connect to USR DTU <a class="header-anchor" href="#connect-to-usr-dtu" aria-label="Permalink to “Connect to USR DTU”">​</a></h1><p>USR DTU supports two-way conversion of data, supports mutual conversion of common serial data such as RS232, RS485, RS422, and TCP/IP data, and transmits them through the wireless communication network. The communication methods generally used by DTU are 2/3/4G, NB-IoT, LoRaWAN, WIFI, etc.</p><p>You can directly communicate with Modbus RTU devices using GridBeat&#39;s Modbus RTU plugin in serial mode. Or you can use USR DTU to first gather and convert serial data to network data, then connect it to GridBeat. In this case:</p><ul><li>For USR DTU&#39;s pass-through working mode, connect directly to the Ethernet mode of GridBeat&#39;s Modbus RTU module.</li><li>If you&#39;re using USR DTU&#39;s Modbus TCP mode, you need to use the Modbus TCP plugin.</li></ul><p>This section introduces how to connect USR DTU under Modbus TCP mode. For details about GridBeat&#39;s Modbus TCP plugin, see the <a href="./../../../modbus-tcp/modbus-tcp.html">Modbus TCP driver module</a>.</p><p><img src="'+r+'" alt="gridbeat-dtu"></p><h2 id="usr-dtu-configuration" tabindex="-1">USR DTU Configuration <a class="header-anchor" href="#usr-dtu-configuration" aria-label="Permalink to “USR DTU Configuration”">​</a></h2><img src="'+s+'" alt="dtu" style="zoom:50%;"><table tabindex="0"><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td><strong>Work Mode</strong></td><td>Typically, USR DTU supports connecting via TCP or UDP in either client or server mode. It can transmit data using the Modbus TCP standard protocol, or it can transmit <strong>None</strong> (transparent) data. Here we set it to <strong>ModbusTCP</strong>.</td></tr><tr><td><strong>Remote Server Addr</strong></td><td>When DTU acts as a client, fill in the address bound to GridBeat Modbus.</td></tr><tr><td><strong>Local/Remote Port Number</strong></td><td>When DTU acts as a client, fill in the port bound to GridBeat Modbus. When DTU acts as a server, use the port of DTU.</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title custom-block-title-default">TIP</p><p>DTU usually supports serial port heartbeats, or enables network heartbeats and registration packets. These features cannot be used in the standard Modbus protocol, and GridBeat currently is not compatible with these features. When using GridBeat to connect to a DTU, be sure to turn off these options.</p></div><h2 id="client-server-mode" tabindex="-1">Client/Server Mode <a class="header-anchor" href="#client-server-mode" aria-label="Permalink to “Client/Server Mode”">​</a></h2><p>Client/Server, also known as client/server mode, referred to as C/S mode, is a network communication architecture, which is used to distinguish the two parties who establish a communication connection as a client (Clent) and a server (Server).</p><p>In TCP, the client is the initiator of the request and sends the connection request to the server actively, while the server waits for the request from the client passively.</p><p>The following figure shows the workflow for establishing a connection between the Client and Server.</p><img src="'+a+'" alt="client_server" style="zoom:50%;"><h2 id="establish-client-connection-with-gridbeat" tabindex="-1">Establish Client Connection with GridBeat <a class="header-anchor" href="#establish-client-connection-with-gridbeat" aria-label="Permalink to “Establish Client Connection with GridBeat”">​</a></h2><p>This section mainly describes the configuration of GridBeat and DTU when GridBeat serves as the Client and DTU serves as Server.</p><p>As a Client, GridBeat initiates connection requests to DTU actively. The user needs to ensure the network connectivity of GridBeat -&gt; DTU.</p><h3 id="configure-dtu-server" tabindex="-1">Configure DTU Server <a class="header-anchor" href="#configure-dtu-server" aria-label="Permalink to “Configure DTU Server”">​</a></h3><p>First, you need to configure the parameters of the connection between the DTU and the serial port, and second, you need to configure the parameters of the Socket for the connection between the DTU and the GridBeat, as shown in the figure below.</p><img src="'+d+'" alt="tcp-server" style="zoom:50%;"><ul><li>Working mode: TCP Server, Modbus TCP;</li><li>Fill in an unused local port, no need to fill in the remote port;</li><li>The other parameters are optional.</li></ul><h3 id="get-dtu-ip" tabindex="-1">Get DTU IP <a class="header-anchor" href="#get-dtu-ip" aria-label="Permalink to “Get DTU IP”">​</a></h3><p>While configuring the GridBeat&#39;s southbound driver, you&#39;ll need to input the IP address of the server-side DTU, as illustrated in the figure below. <img src="'+l+'" alt="dtu-ip-config"></p><h3 id="configure-gridbeat-client" tabindex="-1">Configure GridBeat (Client) <a class="header-anchor" href="#configure-gridbeat-client" aria-label="Permalink to “Configure GridBeat (Client)”">​</a></h3><p>In <strong>South Device</strong>, create a node using the plugin Modbus TCP, and configure the driver, as shown in the figure below. <img src="'+c+'" alt="gridbeat-client-config"></p><ul><li><strong>Connection mode</strong>: client</li><li><strong>Host</strong>: Fill in the IP address of USR DTU</li><li><strong>Port</strong>: Fill in the port of USR DTU</li><li><strong>Timeout</strong>: Keep the default setting</li></ul><h2 id="establish-server-connection-with-gridbeat" tabindex="-1">Establish Server Connection with GridBeat <a class="header-anchor" href="#establish-server-connection-with-gridbeat" aria-label="Permalink to “Establish Server Connection with GridBeat”">​</a></h2><p>This section mainly describes the configuration of GridBeat and DTU when GridBeat serves as the Server and DTU serves as the Client.</p><p>As a Client, DTU initiates connection requests to GridBeat. Users need to ensure the network connectivity of DTU -&gt; GridBeat. This connection mode can generally be used in the following scenarios. When some DTU uses 4G to access the Internet, GridBeat cannot actively connect to DTU, so GridBeat can only choose Server mode and actively connect to GridBeat by DTU.</p><p>Besides, When GridBeat and DTU are not in the same LAN, you can map the LAN IP and port of the GridBeat operating environment to the WAN, and use GridBeat as the server end and DTU as the client end.</p><h3 id="configure-dtu-client" tabindex="-1">Configure DTU Client <a class="header-anchor" href="#configure-dtu-client" aria-label="Permalink to “Configure DTU Client”">​</a></h3><p>First, you need to configure the parameters of the connection between the DTU and the serial port, and second, you need to configure the parameters of the Socket for the connection between the DTU and the GridBeat, as shown in the figure below.</p><p><img src="'+h+`" alt="tcp-client"></p><ul><li><strong>Remote server address</strong>: Fill in the IP address of GridBeat (running as the server);</li><li><strong>Local port</strong>: Not filled in by default;</li><li><strong>Remote port</strong>: Since each TCP Server port will listen to the incoming TCP traffic on the port specified by the client, therefore, the user needs to customize an unoccupied port for handshake establishment between the client and the server connect.</li></ul><div class="tip custom-block"><p class="custom-block-title custom-block-title-default">TIP</p><p>You can execute the following command on the server terminal to determine whether the listening port is occupied.</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Confirm whether the port is occupied</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">netstat</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -anp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grep</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">por</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div></div><h3 id="configure-gridbeat-server" tabindex="-1">Configure GridBeat (Server) <a class="header-anchor" href="#configure-gridbeat-server" aria-label="Permalink to “Configure GridBeat (Server)”">​</a></h3><p>In <strong>South Devices</strong>, create a node with plugin Modbus TCP, and configure the driver, as shown in the figure below.</p><p><img src="`+u+'" alt="gridbeat-server-config"></p><ul><li>Select server as the <strong>Connection mode</strong>;</li><li><strong>Host</strong>: Fill in 0.0.0.0;</li><li><strong>Port</strong>: Fill in the listening port.</li></ul>',40)])])}const C=t(p,[["render",g]]);export{U as __pageData,C as default};
