import{_ as r,c as a,o as s,ah as n}from"./chunks/framework.DGOuNAW6.js";const k=JSON.parse('{"title":"SparkPlugB","description":"","frontmatter":{},"headers":[],"relativePath":"zh_CN/configuration/north-apps/sparkplugb/overview.md","filePath":"zh_CN/configuration/north-apps/sparkplugb/overview.md"}'),e={name:"zh_CN/configuration/north-apps/sparkplugb/overview.md"};function o(i,t,d,g,l,p){return s(),a("div",null,[...t[0]||(t[0]=[n('<h1 id="sparkplugb" tabindex="-1">SparkPlugB <a class="header-anchor" href="#sparkplugb" aria-label="Permalink to “SparkPlugB”">​</a></h1><p>Sparkplug B 是一种建立在 MQTT 3.1.1 基础上的工业物联网数据传输规范。Sparkplug B 在保证灵活性和效率的前提下，使 MQTT 网络具备状态感知和互操作性，为设备制造商和软件提供商提供了统一的数据共享方式。</p><p>GridBeat 从设备采集到的数据可以通过 Sparkplug B 协议从边缘端传输到 Sparkplug B 应用中，用户也可以从应用程序向 GridBeat 发送数据修改指令。</p><h2 id="添加插件" tabindex="-1">添加插件 <a class="header-anchor" href="#添加插件" aria-label="Permalink to “添加插件”">​</a></h2><p>在<strong>数据采集 -&gt; 北向应用</strong>，点击 <strong>添加应用</strong> 添加 SparkPlugB 客户端节点。</p><h2 id="应用配置" tabindex="-1">应用配置 <a class="header-anchor" href="#应用配置" aria-label="Permalink to “应用配置”">​</a></h2><p>Sparkplug B 是运行在 MQTT 之上的应用型协议，所以在 GridBeat 中的设置与 MQTT 插件相似。</p><table tabindex="0"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td><strong>客户端 ID</strong></td><td>MQTT 客户端 ID，连接的唯一标识</td></tr><tr><td><strong>组 ID</strong></td><td>Sparkplug B 协议中的最顶层逻辑分组，可以代表工厂或车间等实体</td></tr><tr><td><strong>节点 ID</strong></td><td>Sparkplug B 协议中的边缘节点唯一标识</td></tr><tr><td><strong>启用别名</strong></td><td>启用 Metric 别名，值为 true 时启用，默认关闭</td></tr><tr><td><strong>组 Path</strong></td><td>将南向设备的组名称作为指标名称的起始路径，值为 true 时启用, 默认开启</td></tr><tr><td><strong>离线缓存</strong></td><td>离线缓存开关。连接断开时缓存 MQTT 消息，连接重建时同步缓存的 MQTT 消息到服务器, 值为 true 时开启，默认关闭</td></tr><tr><td><strong>缓存内存大小</strong></td><td>当 MQTT 连接异常时，最大的内存缓存大小（单位：MB）。应该小于缓存磁盘大小。</td></tr><tr><td><strong>缓存磁盘大小</strong></td><td>当 MQTT 连接异常时，最大的磁盘缓存大小（单位：MB）。应该大于缓存内存大小。如果不为 0，缓存内存大小也应该不为 0。</td></tr><tr><td><strong>缓存消息重传间隔</strong></td><td>缓存消息重传间隔（MS）,单位毫秒</td></tr><tr><td><strong>服务器地址</strong></td><td>MQTT Broker 主机</td></tr><tr><td><strong>服务器端口</strong></td><td>MQTT Broker 端口号</td></tr><tr><td><strong>用户名</strong></td><td>连接到 Broker 时使用的用户名</td></tr><tr><td><strong>密码</strong></td><td>连接到 Broker 时使用的密码</td></tr><tr><td><strong>SSL</strong></td><td>是否启用 mqtt ssl，默认 false</td></tr><tr><td><strong>CA 证书</strong></td><td>ca 文件，只在 ssl 值为 true 时启用</td></tr><tr><td><strong>客户端证书</strong></td><td>cert 文件，只在 ssl 值为 true 时启用</td></tr><tr><td><strong>客户端私钥</strong></td><td>key 文件，只在 ssl 值为 true 时启用</td></tr><tr><td><strong>私钥密码</strong></td><td>key 文件密码，只有在 ssl 值为 true 时启用</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title custom-block-title-default">TIP</p><p>以上参数中只有 <strong>组 ID</strong> 和 <strong>节点 ID</strong> 来源于 Sparkplug B 规范，其余均为 MQTT Broker 的连接参数，可以参阅 <a href="./../mqtt/overview.html">MQTT 概览</a>。</p></div><h2 id="订阅南向数据" tabindex="-1">订阅南向数据 <a class="header-anchor" href="#订阅南向数据" aria-label="Permalink to “订阅南向数据”">​</a></h2><p>采集点位是以组为单位进行数据上传的，订阅选择要上传的点位组。</p><p>点击 SparkPlugB 节点卡片，进入<strong>组列表</strong>页，点击 <strong>添加订阅</strong> 选择要订阅的点位组，订阅南向设备的点位组。完成订阅后，我们的北向 SparkPlug B 应用将开始接受南向数据。</p><p>添加 Json 格式静态数据点位，与数采测点同时上报：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;location&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sh&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;number&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;12345613&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="应用场景" tabindex="-1">应用场景 <a class="header-anchor" href="#应用场景" aria-label="Permalink to “应用场景”">​</a></h2><p>您可通过 GridBeat Sparkplug B 插件将数据上报到 EMQX，并通过 EMQX 的编解码功能得到正确完整的数据结果，具体结果，见 <a href="./sparkplug.html">集成 EMQX</a>。</p><p>您可通过 GridBeat SparkPlugB 插件连接 Ignition 平台，具体步骤，见 <a href="./ignition.html">Ignition</a>。</p><p>您也可通过 GridBeat SparkPlugB 插件连接 Cogent DataHub，具体步骤，见 <a href="./cogent.html">Cogent</a>。</p><h2 id="运行与维护" tabindex="-1">运行与维护 <a class="header-anchor" href="#运行与维护" aria-label="Permalink to “运行与维护”">​</a></h2><p>在设备卡片或设备列，您可点击数据统计图表查看及应用运行情况、接受和发送的数据情况。关于统计字段的说明，见<a href="./../north-apps.html">创建北向应用</a>。</p><p>如果设备运行出现任何问题，您可点击 DEBUG 日志图表，此时系统将自动打印该节点的 DEBUG 级别日志，十分钟后将切回系统默认级别日志。稍后，您可点击页面顶部功能栏的<strong>系统信息</strong> -&gt; <strong>日志</strong>查看日志，并进行故障诊断。稍后，您可点击页面顶部功能栏的<strong>系统信息</strong> -&gt; <strong>日志</strong>查看日志，并进行故障诊断。有关系统日志的详细解析，见<a href="./../../../admin/log-management.html">管理日志</a>。</p>',21)])])}const u=r(e,[["render",o]]);export{k as __pageData,u as default};
