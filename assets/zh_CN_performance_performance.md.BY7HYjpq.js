import{_ as e,c as t,o as r,ah as i,mm as d,mn as h,mo as l,mp as n,mq as s,mr as o}from"./chunks/framework.D2dsaVOY.js";const G=JSON.parse('{"title":"性能测试","description":"","frontmatter":{},"headers":[],"relativePath":"zh_CN/performance/performance.md","filePath":"zh_CN/performance/performance.md"}'),p={name:"zh_CN/performance/performance.md"};function b(c,a,m,P,_,f){return r(),t("div",null,[...a[0]||(a[0]=[i('<h1 id="性能测试" tabindex="-1">性能测试 <a class="header-anchor" href="#性能测试" aria-label="Permalink to “性能测试”">​</a></h1><p>性能验证包括 GridBeat 数据采集性能测试、GridBeat 数据下发性能测试及采集数据的存储性能测试等；在测试过程中同步进行功能验证，包括规则引擎、边缘计算及云边协同监控等功能；在测试过程中持续监控设备连接数，连接稳定性，消息的成功率，CPU，网络 IO，内存情况等，详细测试场景如下。</p><h2 id="测试场景" tabindex="-1">测试场景 <a class="header-anchor" href="#测试场景" aria-label="Permalink to “测试场景”">​</a></h2><p>根据客户实际需求，规划了以下测试场景：</p><h3 id="数据采集测试一" tabindex="-1">数据采集测试一 <a class="header-anchor" href="#数据采集测试一" aria-label="Permalink to “数据采集测试一”">​</a></h3><table tabindex="0"><thead><tr><th>模拟设备数量</th><th>每个设备数据标签数量</th><th>采集频率</th><th>总数据标签数</th></tr></thead><tbody><tr><td>500</td><td>30</td><td>1s</td><td>15000</td></tr></tbody></table><p>GridBeat 通过 Modbus TCP 协议，模拟连接 500 台设备，每台设备采集 30 个数据标签，采集频率为 1 秒一次，总计 GridBeat 每秒采集 15000 个数据标签。</p><h3 id="数据采集测试二" tabindex="-1">数据采集测试二 <a class="header-anchor" href="#数据采集测试二" aria-label="Permalink to “数据采集测试二”">​</a></h3><table tabindex="0"><thead><tr><th>模拟设备数量</th><th>每个设备数据标签数量</th><th>采集频率</th><th>总数据标签数</th></tr></thead><tbody><tr><td>500</td><td>30</td><td>0.5s</td><td>15000</td></tr></tbody></table><p>GridBeat 通过 Modbus TCP 协议，模拟连接 500 台设备，每台设备采集 30 个数据标签，采集频率为 0.5 秒一次，总计 GridBeat 每 0.5 秒采集 15000 个数据标签位。</p><h3 id="数据下发测试一" tabindex="-1">数据下发测试一 <a class="header-anchor" href="#数据下发测试一" aria-label="Permalink to “数据下发测试一”">​</a></h3><table tabindex="0"><thead><tr><th>设备数量</th><th>单设备下发数据标签数</th><th>总计下发数据标签数</th><th>下发方式</th></tr></thead><tbody><tr><td>1</td><td>50</td><td>50</td><td>GridBeat API</td></tr></tbody></table><p>GridBeat 通过 Modbus TCP 协议，模拟连接 1 台设备，通过 GridBeat API 接口向设备写入 50 个数据标签，测试完成数据下发总计时间。</p><h3 id="数据下发测试二" tabindex="-1">数据下发测试二 <a class="header-anchor" href="#数据下发测试二" aria-label="Permalink to “数据下发测试二”">​</a></h3><table tabindex="0"><thead><tr><th>设备数量</th><th>单设备下发数据标签数</th><th>总计下发数据标签数</th><th>下发方式</th></tr></thead><tbody><tr><td>4</td><td>50</td><td>200</td><td>GridBeat API</td></tr></tbody></table><p>GridBeat 通过 Modbus TCP 协议，模拟连接 4 台设备，通过 GridBeat API 接口向设备总计写入 200 个数据标签，测试完成数据下发总计时间。</p><h3 id="批量写入-tdengine-测试" tabindex="-1">批量写入 TDengine 测试 <a class="header-anchor" href="#批量写入-tdengine-测试" aria-label="Permalink to “批量写入 TDengine 测试”">​</a></h3><p>模拟 GridBeat 采集 100 个设备的数据，每个设备包含 100 个数据标签，每秒上报共 10000 个数据标签到 EMQX 企业版，通过 EMQX 内置规则引擎将以上数据实时写入 TDengine。</p><h2 id="测试架构" tabindex="-1">测试架构 <a class="header-anchor" href="#测试架构" aria-label="Permalink to “测试架构”">​</a></h2><h3 id="测试资源" tabindex="-1">测试资源 <a class="header-anchor" href="#测试资源" aria-label="Permalink to “测试资源”">​</a></h3><p>Modbus 模拟器模拟现场 PLC 设备，GridBeat 通过 Modbus TCP 连接模拟器，GridBeat 采集到数据后通过 MQTT 协议发送至 EMQX 企业版，数据通过 EMQX 内置规则引擎写入 TDengine。</p><p>所使用 GridBeat EMQX 企业版、Modbus 模拟器资源如下：</p><p>服务1: 笔记本电脑</p><ul><li>Modbus 模拟器</li><li>JMeter 软件</li></ul><p>服务2: Linux 服务器 4C/16G</p><ul><li>GridBeat V2.2.1</li><li>EMQX 企业版</li><li>TDengine 数据库</li><li>云边协同管理软件</li></ul><h3 id="测试架构图" tabindex="-1">测试架构图 <a class="header-anchor" href="#测试架构图" aria-label="Permalink to “测试架构图”">​</a></h3><p><img src="'+d+'" alt="Simulation"></p><h3 id="测试工具" tabindex="-1">测试工具 <a class="header-anchor" href="#测试工具" aria-label="Permalink to “测试工具”">​</a></h3><p><b>Modbus 模拟器</b></p><p><a href="https://www.hmisys.com" target="_blank" rel="noreferrer">PeakHMI Modbus TCP slave simulator</a>，是一款功能齐全、性能优秀的 Modbus 模拟器。</p><p><b>性能测试工具 JMeter</b></p><p>性能测试工具 JMeter 是一款基于 Java 的压力测试工具。它可以用于对服务器、网络或对象模拟繁重的负载来测试它们的强度或分析不同压力类型下的整体性能。</p><h2 id="测试结论及报告" tabindex="-1">测试结论及报告 <a class="header-anchor" href="#测试结论及报告" aria-label="Permalink to “测试结论及报告”">​</a></h2><h3 id="数据采集测试一-1" tabindex="-1">数据采集测试一 <a class="header-anchor" href="#数据采集测试一-1" aria-label="Permalink to “数据采集测试一”">​</a></h3><p>GridBeat 通过 Modbus TCP 协议，模拟连接 500 台设备，每台设备采集 30 个数据标签，采集频率为 1 秒一次，总计GridBeat 每秒采集 15000 个数据标签。</p><ul><li>GridBeat 采集程序 CPU 使用率约为 124.3%，内存使用率约为 0.6%</li><li>服务器资源 CPU 空闲在 55% 左右，内存空闲在 9.8G 左右。</li></ul><p><img src="'+h+'" alt="Test1"></p><h3 id="数据采集测试二-1" tabindex="-1">数据采集测试二 <a class="header-anchor" href="#数据采集测试二-1" aria-label="Permalink to “数据采集测试二”">​</a></h3><p>GridBeat 通过 Modbus TCP 协议，模拟连接 500 台设备，每台设备采集 30 个数据标签，采集频率为 0.5 秒一次，总计 GridBeat 每 0.5 秒采集 15000 个数据标签。</p><ul><li>GridBeat 采集程序 CPU 使用率约为111.3%，内存使用率约为 1.1%</li><li>服务器资源 CPU 空闲在 35% 左右，内存空闲在 9.5G 左右。</li></ul><p><img src="'+l+'" alt="Test2"></p><h3 id="数据下发测试一-1" tabindex="-1">数据下发测试一 <a class="header-anchor" href="#数据下发测试一-1" aria-label="Permalink to “数据下发测试一”">​</a></h3><p>GridBeat 通过 Modbus TCP 协议，模拟连接 1 台设备，通过 GridBeat API 接口向设备写入 50 个数据标签，测试完成数据下发总计时间。 GridBeat 对 1 个设备下发50个数据标签，最大响应时间 159 毫秒，最小响应时间 3 毫秒，平均响应时间 91 毫秒，总计耗时 159 毫秒。</p><p><img src="'+n+'" alt="Test3"></p><h3 id="数据下发测试二-1" tabindex="-1">数据下发测试二 <a class="header-anchor" href="#数据下发测试二-1" aria-label="Permalink to “数据下发测试二”">​</a></h3><p>GridBeat 通过 Modbus TCP 协议，模拟连接 4 台设备，通过 GridBeat API 接口向设备总计写入 200 个数据标签，测试完成数据下发总计时间。 GridBeat 对 4 个设备下发共计 200 个数据标签，最大响应时间 107 毫秒，最小响应时间 3 毫秒，平均响应时间 52 毫秒，总计耗时 107 毫秒。</p><p><img src="'+s+'" alt="Test4"></p><h3 id="批量写入-tdengine-测试-1" tabindex="-1">批量写入 TDengine 测试 <a class="header-anchor" href="#批量写入-tdengine-测试-1" aria-label="Permalink to “批量写入 TDengine 测试”">​</a></h3><p>模拟 GridBeat 采集 100 个设备的数据，每个设备包含 100 个数据标签，每秒上报共 10000 个数据标签到 EMQX 企业版，通过 EMQX 内置规则引擎将以上数据实时写入 TDengine。</p><ul><li>EMQX 软件 CPU 使用率约为 91.2%，内存使用率约为 1.2%</li><li>服务器资源 CPU 空闲在 13% 左右，内存空闲在 156M 左右。</li></ul><p><img src="'+o+'" alt="Test5"></p>',52)])])}const B=e(p,[["render",b]]);export{G as __pageData,B as default};
