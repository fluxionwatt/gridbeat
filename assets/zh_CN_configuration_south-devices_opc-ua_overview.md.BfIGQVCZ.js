import{_ as r,c as d,o as a,ah as e}from"./chunks/framework.DGOuNAW6.js";const p=JSON.parse('{"title":"OPC UA","description":"","frontmatter":{},"headers":[],"relativePath":"zh_CN/configuration/south-devices/opc-ua/overview.md","filePath":"zh_CN/configuration/south-devices/opc-ua/overview.md"}'),i={name:"zh_CN/configuration/south-devices/opc-ua/overview.md"};function l(o,t,n,s,A,h){return a(),d("div",null,[...t[0]||(t[0]=[e('<h1 id="opc-ua" tabindex="-1">OPC UA <a class="header-anchor" href="#opc-ua" aria-label="Permalink to “OPC UA”">​</a></h1><p>OPC UA 是一种面向工业自动化的机器到机器通信协议，由 OPC 基金会开发维护。OPC UA 提供一种标准化的方式， 使不同的设备和系统能够互相通信。</p><p>GridBeat OPC UA 插件可作为客户端访问 KEPServerEX、Industrial Gateway OPC Server、Prosys Simulation Server、Ignition 等 OPC UA 服务器，也可以直接访问硬件设备的内置 OPC UA Server，如西门子 S7-1200 型 PLC 的内置 Server、 欧姆龙 NJ 系列 PLC 的内置 Server 等。</p><div class="tip custom-block"><p class="custom-block-title custom-block-title-default">TIP</p><p>OPC UA 服务端目前支持匿名方式、用户名/密码方式、证书/密钥 + 匿名方式和证书/密钥 + 用户名/密码方式等方式访问，具体可参考 <a href="./policy.html">OPC UA 连接策略</a>。</p></div><h2 id="添加插件" tabindex="-1">添加插件 <a class="header-anchor" href="#添加插件" aria-label="Permalink to “添加插件”">​</a></h2><p>在 <strong>配置 -&gt; 南向设备</strong>，点击<strong>添加设备</strong>来创建设备节点，输入插件名称，插件类型选择 <strong>OPC UA</strong> 启用插件。</p><h2 id="设备配置" tabindex="-1">设备配置 <a class="header-anchor" href="#设备配置" aria-label="Permalink to “设备配置”">​</a></h2><p>点击插件卡片或插件列，进入<strong>设备配置</strong>页。配置 GridBeat 与设备建立连接所需的参数，下表为 OPC UA 相关配置项。</p><table tabindex="0"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td><strong>端点 URL</strong></td><td>目标 OPC UA Server 的 URL，默认值是 <code>opc.tcp://127.0.0.1:4840/</code></td></tr><tr><td><strong>用户名</strong></td><td>连接目标 OPC UA Server 使用的用户名</td></tr><tr><td><strong>密码</strong></td><td>连接目标 OPC UA Server 使用的密码</td></tr><tr><td><strong>证书</strong></td><td>DER 格式的客户端证书</td></tr><tr><td><strong>密钥</strong></td><td>DER 格式的客户端密钥</td></tr><tr><td><strong>安全策略</strong></td><td>设置 OPC UA 连接的安全策略，None/Sign/Sign&amp;Encrypt，默认为 None</td></tr><tr><td><strong>更新模式</strong></td><td>设置 OPC UA 采集数据的方式，Read/Subscribe/Read&amp;Subscribe，默认为 Read</td></tr><tr><td><strong>发布间隔</strong></td><td>设置 OPC UA 以 Subscribe/Read&amp;Subscribe 模式采集数据时，两次发布之间的最小间隔</td></tr></tbody></table><h2 id="更新模式" tabindex="-1">更新模式 <a class="header-anchor" href="#更新模式" aria-label="Permalink to “更新模式”">​</a></h2><p><strong>Read</strong> 模式，数据更新方式与之前版本的方式一致，采用 OPC UA 标准的读取接口获取 Server 端数据，这也是默认的数据更新方式。</p><p><strong>Subscribe</strong> 模式，新增的数据更新方式，采用 OPC UA 标准的订阅接口获取 Server 数据，订阅成功会批量更新一次数据，后续只有 Server 端数据变化才会更新。</p><p><strong>Read&amp;Subscribe</strong> 模式，新增的数据更新方式，同时采用读取接口和订阅接口获取 Server 端数据。</p><p><strong>发布间隔</strong>定义了当<strong>更新模式</strong>设置为 Subscribe 或 Read&amp;Subscribe 模式时， OPCUA 服务器向 GridBeatEX 循环发送点位更新值的最快速率。如果该参数设置为0，使用 OPCUA 服务器支持的最快发布间隔。该间隔以毫秒为单位表示。默值值为 500ms，表示 OPC UA 服务器发送给 GridBeatEX 最快的点位更新速率为 500ms。</p><div class="tip custom-block"><p class="custom-block-title custom-block-title-default">TIP</p><p><strong>更新模式</strong>在南向节点的全局参数中设置，表示该南向节点以 OPC UA 的订阅方式获得数据。而 GridBeatEX 点位设置中的 Subscribe 属性表示这个点位的数值发生变化时立即触发北向应用的上送报告。同时设置二者便可以获得实时的数据变化报告。</p></div><h2 id="设置组和点位" tabindex="-1">设置组和点位 <a class="header-anchor" href="#设置组和点位" aria-label="Permalink to “设置组和点位”">​</a></h2><p>完成插件的添加和配置后，要建立设备与 GridBeat 之间的通信，首先为南向驱动程序添加组和点位。</p><p>完成设备配置后，在<strong>南向设备</strong>页，点击设备卡片/设备列进入<strong>组列表</strong>页。点击<strong>创建</strong>来创建组，设定组名称以及采集间隔。完成组的创建后，点击组名称进入<strong>点位列表</strong>页，添加需要采集的设备点位，包括点位地址，点位属性，数据类型等。</p><p>公共配置项部分可参考<a href="./../south-devices.html">连接南向设备</a>，本页将介绍支持的数据类型和地址格式部分。</p><div class="tip custom-block"><p class="custom-block-title custom-block-title-default">TIP</p><p>可以使用 UaExpert 软件协助查看所需点位的命名空间索引和节点 ID 信息，参考 <a href="./uaexpert.html">UaExpert</a>。</p><ul><li><p>关于命名空间索引和节点 ID 的解释，请参考 OPC UA 标准。</p></li><li><p>GridBeat 设置的数据类型必须与 OPC UA 数据类型相匹配。</p></li></ul></div><h3 id="数据类型" tabindex="-1">数据类型 <a class="header-anchor" href="#数据类型" aria-label="Permalink to “数据类型”">​</a></h3><ul><li>INT8（用于表示 OPC UA SBYTE 类型）</li><li>INT16</li><li>INT32</li><li>INT64</li><li>UINT8（用于表示 OPC UA BYTE 类型）</li><li>UINT16</li><li>UINT32（同时用于表示 OPC UA DATETIME 类型）</li><li>UINT64</li><li>FLOAT</li><li>DOUBLE</li><li>BOOL</li><li>BIT</li><li>STRING</li><li>ARRAY_CHAR</li><li>ARRAY_INT8</li><li>ARRAY_UINT8</li><li>ARRAY_INT16</li><li>ARRAY_UINT16</li><li>ARRAY_INT32</li><li>ARRAY_UINT32</li><li>ARRAY_INT64</li><li>ARRAY_UINT64</li><li>ARRAY_FLOAT</li><li>ARRAY_DOUBLE</li><li>ARRAY_BOOL</li><li>JSON</li></ul><h4 id="数据类型转换" tabindex="-1">数据类型转换 <a class="header-anchor" href="#数据类型转换" aria-label="Permalink to “数据类型转换”">​</a></h4><table tabindex="0"><thead><tr><th>OPC UA 数据类型</th><th>GridBeat 数据类型</th></tr></thead><tbody><tr><td>SByte</td><td>INT8</td></tr><tr><td>Int16</td><td>INT16</td></tr><tr><td>Int32</td><td>INT32</td></tr><tr><td>Int64</td><td>INT64</td></tr><tr><td>Byte</td><td>UINT8</td></tr><tr><td>UInt16</td><td>UINT16</td></tr><tr><td>UInt32</td><td>UINT32</td></tr><tr><td>UInt64</td><td>UINT64</td></tr><tr><td>Float</td><td>FLOAT</td></tr><tr><td>Double</td><td>DOUBLE</td></tr><tr><td>Boolean</td><td>BOOL (采集值为true或false)</td></tr><tr><td>Boolean</td><td>BIT (采集值为0或1)</td></tr><tr><td>String</td><td>STRING</td></tr><tr><td>Datetime</td><td>UINT32</td></tr><tr><td>LocalizedText（只读）</td><td>STRING</td></tr><tr><td>SByte Array</td><td>ARRAY_INT8</td></tr><tr><td>Int16 Array</td><td>ARRAY_INT16</td></tr><tr><td>Int32 Array</td><td>ARRAY_INT32</td></tr><tr><td>Int64 Array</td><td>ARRAY_INT64</td></tr><tr><td>Byte Array</td><td>ARRAY_UINT8, ARRAY_CHAR</td></tr><tr><td>UInt16 Array</td><td>ARRAY_UINT16</td></tr><tr><td>UInt32 Array</td><td>ARRAY_UINT32</td></tr><tr><td>UInt64 Array</td><td>ARRAY_UINT64</td></tr><tr><td>Float Array</td><td>ARRAY_FLOAT</td></tr><tr><td>Double Array</td><td>ARRAY_DOUBLE</td></tr><tr><td>Boolean Array</td><td>ARRAY_BOOL</td></tr><tr><td>OPCUA Exentision Object</td><td>JSON</td></tr></tbody></table><p>ARRAY_CHAR 展示和写入形式为字符串。 JSON 展示和写入形式为 JSON 字符串。 OPCUA Exentision Object 支持数组和嵌套。</p><h3 id="地址格式" tabindex="-1">地址格式 <a class="header-anchor" href="#地址格式" aria-label="Permalink to “地址格式”">​</a></h3><blockquote><p>NS[x,y,z]!NODEID</p></blockquote><p><strong>NS</strong> 名字空间索引。</p><p><strong>[x,y,z]</strong> 数组索引，当数据类型为数组时，可以使用索引获取到特定位置的数值，维度从 0 开始计数，维度不超过 2。 x 表示一维索引，y 表示二维索引，z 表示三维索引。</p><p><strong>NODEID</strong> 节点 ID，可以设置为数字形式、字符串形式和 GUID 形式。</p><h3 id="地址示例" tabindex="-1">地址示例 <a class="header-anchor" href="#地址示例" aria-label="Permalink to “地址示例”">​</a></h3><table tabindex="0"><thead><tr><th>地址</th><th>数据类型</th><th>说明</th></tr></thead><tbody><tr><td>0!2258</td><td>UINT32</td><td>使用数字类型的 NODEID，获取 OPC UA 服务器的时间戳；NS 为0，NODEID 为2258</td></tr><tr><td>2!Device1.Module1.Tag1</td><td>INT8</td><td>使用字符串类型的 NODEID，获取类型为 SBYTE 的数据点；NS 为2，NODEID 为 Device1.Module1.Tag1</td></tr><tr><td>0!c496578a-0dfe-4b8f-870a-745238c6ae00</td><td>BOOL</td><td>使用 GUID 类型的 NODEID，获取类型为 BOOL 的数据点；NS 为0，NODEID 为c496578a-0dfe-4b8f-870a-745238c6ae00</td></tr><tr><td>1[2]!array1d[string]</td><td>STRING</td><td>访问 STRING 数组的第 3 个元素；NS 为1，NODEID 为 array1d[string], 一维索引为 2</td></tr><tr><td>1[2,3]!array2d[int]</td><td>INT32</td><td>访问 INT32 数组的第 3 行，第 4 列的元素；NS 为1，NODEID 为 array2d[int], 一维索引为 2，二维索引为 3</td></tr><tr><td>1[2,3,4]!array3d[float]</td><td>FLOAT</td><td>访问 FLOAT 数组的第 3 行，第 4 列，第 5 个元素；NS 为1，NODEID 为 array3d[float], 一维索引为 2，二维索引为 3，三维索引为 4</td></tr><tr><td>0!3D.Point</td><td>JSON</td><td>获取一个关于 3D 位置的扩展对象，对象包含 x，y，z 三个成员元素</td></tr></tbody></table><h2 id="应用场景" tabindex="-1">应用场景 <a class="header-anchor" href="#应用场景" aria-label="Permalink to “应用场景”">​</a></h2><p>本节还提供以下应用场景示例，方便您快速上手：</p><ul><li><a href="./s71200.html">Siemens S7-1200</a></li><li><a href="./kepserverex.html">KEPServerEX</a></li><li><a href="./igs.html">Industrial Gateway OPC Server</a></li><li><a href="./ignition.html">Ignition</a></li><li><a href="./prosys.html">Prosys Simulation Server</a></li></ul><h2 id="数据监控" tabindex="-1">数据监控 <a class="header-anchor" href="#数据监控" aria-label="Permalink to “数据监控”">​</a></h2><p>完成点位的配置后，您可点击 <strong>监控</strong> -&gt; <strong>数据监控</strong>查看设备信息以及反控设备，具体可参考<a href="./../../../admin/monitoring.html">数据监控</a>。</p>',37)])])}const I=r(i,[["render",l]]);export{p as __pageData,I as default};
