import{_ as e,c as a,o as l,ah as i}from"./chunks/framework.DGOuNAW6.js";const p=JSON.parse('{"title":"IEC60870-5-104","description":"","frontmatter":{},"headers":[],"relativePath":"zh_CN/configuration/south-devices/iec-104/iec-104.md","filePath":"zh_CN/configuration/south-devices/iec-104/iec-104.md"}'),r={name:"zh_CN/configuration/south-devices/iec-104/iec-104.md"};function d(o,t,s,c,n,_){return l(),a("div",null,[...t[0]||(t[0]=[i('<h1 id="iec60870-5-104" tabindex="-1">IEC60870-5-104 <a class="header-anchor" href="#iec60870-5-104" aria-label="Permalink to “IEC60870-5-104”">​</a></h1><p>IEC60870-5-104 是一种电力自动化系统中常用的通信协议，使用 TCP/IP 协议作为底层通信协议，用于监视和控制电力系统中的各种设备，如变电站、发电机、开关等。</p><p>GridBeat 支持以总召唤以及设备主动上报数据的方式采集遥信、遥测和遥脉（电度召唤）数据，以及支持通过遥控遥调对设备进行控制。</p><h2 id="添加插件" tabindex="-1">添加插件 <a class="header-anchor" href="#添加插件" aria-label="Permalink to “添加插件”">​</a></h2><p>在 <strong>配置 -&gt; 南向设备</strong>，点击<strong>添加设备</strong>来创建设备节点，输入插件名称，插件类型选择 <strong>IEC60870-5-104</strong> 启用插件。</p><h2 id="设备配置" tabindex="-1">设备配置 <a class="header-anchor" href="#设备配置" aria-label="Permalink to “设备配置”">​</a></h2><p>点击插件卡片或插件列，进入<strong>设备配置</strong>页。配置 GridBeat 与设备建立连接所需的参数，下表为插件相关的配置项。</p><table tabindex="0"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td><strong>设备 IP 地址</strong></td><td>设备的 IPv4 地址</td></tr><tr><td><strong>设备端口</strong></td><td>设备端口号，默认为 2404</td></tr><tr><td><strong>公共地址</strong></td><td>公共地址，唯一标识数据对象</td></tr><tr><td><strong>总召唤间隔</strong></td><td>发送总招唤指令的间隔</td></tr><tr><td><strong>时钟同步间隔</strong></td><td>是否开启时钟同步，定期向设备发送时钟同步请求</td></tr><tr><td><strong>遥脉间隔</strong></td><td>是否开启遥脉，定时召唤总电度信息</td></tr><tr><td><strong>T0</strong></td><td>T0 超时时间，建立 TCP 连接的超时时间，单位：秒</td></tr><tr><td><strong>T1</strong></td><td>T1 超时时间，等待接收方响应请求的超时时间，单位：秒</td></tr><tr><td><strong>T2</strong></td><td>如果 T2 时间内未接收到新的 I 帧报文，则发送 S 帧报文，单位：秒</td></tr><tr><td><strong>T3</strong></td><td>如果 T3 时间内未接收到任何报文，则发送测试报文，单位：秒</td></tr><tr><td><strong>W</strong></td><td>如果接收到 W 个 I 帧，必定发送 S 帧</td></tr></tbody></table><h2 id="设置组和点位" tabindex="-1">设置组和点位 <a class="header-anchor" href="#设置组和点位" aria-label="Permalink to “设置组和点位”">​</a></h2><p>完成插件的添加和配置后，要建立设备与 GridBeat 之间的通信，首先为南向驱动程序添加组和点位。</p><p>完成设备配置后，在<strong>南向设备</strong>页，点击设备卡片/设备列进入<strong>组列表</strong>页。点击<strong>创建</strong>来创建组，设定组名称以及采集间隔。完成组的创建后，点击组名称进入<strong>点位列表</strong>页，添加需要采集的设备点位，包括点位地址，点位属性，数据类型等。</p><p>点位属性配置为<code>Read</code>，则代表该点位不仅会根据配置的<code>总召唤间隔</code>，定期上报104 Server发出的数据点的值，同时还会根据组的<code>采集间隔</code>，定期上报数据。</p><p>点位属性配置为<code>Subscribe</code>，则代表该点位不仅会根据配置的<code>总召唤间隔</code>，定期上报104 Server发出的数据点的值，同时当数据点位变化后，GridBeat也会收到变化的数据点，并通过北向应用配置将数据点北向上报。</p><div class="tip custom-block"><p class="custom-block-title">提示</p><p>由于104协议的实时性要求，配置为<code>Subscribe</code>的点位，GridBeat会在收到数据点位变化后，立即将变化的数据点位上报到北向应用，并且不受采集组的<code>采集间隔</code>限制。</p></div><div class="tip custom-block"><p class="custom-block-title">提示</p><p>当采集组的数据点位都配置为<code>Subscribe</code>类型，即使数据点位没有任何变化，总召唤上报仍会触发。</p></div><p>点位属性配置为<code>Write</code>，则代表该点位支持GridBeat主动写入数据到104 Server，注意，104协议的读地址与写地址是分离的，一个点位地址位要么是读点位要么是写点位，不存在同时可读可写的点位，具体信息可查阅104协议相关文档。</p><p>点位属性<code>Subscribe</code>、<code>Read</code>、<code>Write</code>只可单独配置。</p><div class="tip custom-block"><p class="custom-block-title">提示</p><p>建议在同一个采集组中，只配置一种点位属性，例如，一个采集组中，只配置<code>Subscribe</code>属性的点位，或者只配置<code>Read</code>属性的点位，或者只配置<code>Write</code>属性的点位。</p></div><p>公共配置项部分可参考<a href="./../south-devices.html">连接南向设备</a>，本页将介绍支持的数据类型和地址格式部分。</p><h3 id="地址格式" tabindex="-1">地址格式 <a class="header-anchor" href="#地址格式" aria-label="Permalink to “地址格式”">​</a></h3><blockquote><p>IOA</p></blockquote><h4 id="ioa" tabindex="-1">IOA <a class="header-anchor" href="#ioa" aria-label="Permalink to “IOA”">​</a></h4><p>在 IEC60870-5-104 协议中，IOA (Information Object Address) 指的是信息对象地址，是用于唯一标识一个数据对象的地址，用于指定一个信息对象（遥信、遥测、遥控等）的地址。</p><div class="tip custom-block"><p class="custom-block-title custom-block-title-default">TIP</p><p>IEC60870-5-104 协议中，一个 IOA 标识的地址只属于一种类型，且能读的点位如遥测等与控制点位如遥控等的 IOA 并不相同，例如，遥测点位 IOA 为 100，这个点位对应的遥控点位 IOA 并不是 100，而是映射到其他的 IOA。</p></div><h3 id="实现规范" tabindex="-1">实现规范 <a class="header-anchor" href="#实现规范" aria-label="Permalink to “实现规范”">​</a></h3><h4 id="设备通讯流程" tabindex="-1">设备通讯流程 <a class="header-anchor" href="#设备通讯流程" aria-label="Permalink to “设备通讯流程”">​</a></h4><ul><li>支持数据防止数据丢失与重复，引用 IEC60870-5-104 中 5.1</li><li>支持测试链路功能，引用 IEC60870-5-104 中 5.2</li><li>支持启动停止链路功能，引用 IEC60870-5-104 中 5.3</li><li>支持链路初始化功能，引用 IEC60870-5-104 中 7.1</li><li>支持设备主动上送数据，引用 IEC60870-5-104 中 7.3, 7.4</li><li>支持总召唤设备所有数据功能，引用 IEC60870-5-104 中 7.5</li><li>支持时钟同步功能，引用 IEC60870-5-104 中 7.6</li><li>支持指令遥控功能，引用 IEC60870-5-104 中 7.7</li><li>支持召唤累积量功能，引用 IEC60870-5-104 中 7.8</li></ul><h4 id="支持的-typeids" tabindex="-1">支持的 TypeIDs <a class="header-anchor" href="#支持的-typeids" aria-label="Permalink to “支持的 TypeIDs”">​</a></h4><h5 id="监控方向" tabindex="-1">监控方向 <a class="header-anchor" href="#监控方向" aria-label="Permalink to “监控方向”">​</a></h5><ul><li>M_SP_NA_1: 单点信息 (BIT、 BOOL)</li><li>M_SP_TB_1: 带时标的单点信息 (BIT、 BOOL)</li><li>M_DP_NA_1: 双点信息 (UINT8)</li><li>M_DP_TB_1: 带时标的双点信息 (UINT8)</li><li>M_ST_NA_1: 步位置信息 (INT8)</li><li>M_ST_TB_1: 带时标的步位置信息 (INT8)</li><li>M_BO_NA_1: 32比特串 (UINT32、 INT32)</li><li>M_BO_TB_1: 带时标的32比特串 (UINT32、 INT32)</li><li>M_ME_NA_1: 测量值，归一化值 (FLOAT)</li><li>M_ME_TD_1: 带时标的测量值，归一化值 (FLOAT)</li><li>M_ME_NB_1: 测量值，标度化值 (UINT16、 INT16)</li><li>M_ME_TE_1: 带时标的测量值，标度化值 (UINT16、 INT16)</li><li>M_ME_NC_1: 测量值，短浮点数 (FLOAT)</li><li>M_ME_TF_1: 带时标的测量值，短浮点数 (FLOAT)</li><li>M_IT_NA_1: 累计量 (UINT32、 INT32)</li><li>M_ME_ND_1: 测量值，归一化值，不带品质描述词 (FLOAT)</li></ul><h5 id="控制方向" tabindex="-1">控制方向 <a class="header-anchor" href="#控制方向" aria-label="Permalink to “控制方向”">​</a></h5><ul><li>C_SC_NA_1: 单点遥控 (BIT、 BOOL)</li><li>C_DC_NA_1: 双点遥控 (UINT8)</li><li>C_RC_NA_1: 步调节命令 (INT8)</li><li>C_SE_NA_1: 设置归一化值 (FLOAT, -1.0 ~ 1.0)</li><li>C_SE_NB_1: 设置标度化值 (UINT16、 INT16)</li><li>C_SE_NC_1: 设置短浮点数 (FLOAT)</li><li>C_BO_NA_1: 设置32比特串 (UINT32、 INT32)</li></ul><div class="tip custom-block"><p class="custom-block-title custom-block-title-default">TIP</p><p>不支持 带时标的控制信息对象，如 C_SC_TA_1、C_DC_TA_1、C_RC_TA_1、C_SE_TA_1、C_SE_TB_1、C_SE_TC_1 等。</p></div><h3 id="数据订阅" tabindex="-1">数据订阅 <a class="header-anchor" href="#数据订阅" aria-label="Permalink to “数据订阅”">​</a></h3><p>IEC60870-5-104 在协议层面支持点位发生改变时，设备主动上报点位值。在 GridBeat 侧需要给点位配置 Subscribe 属性，当设备向 GridBeat 发送变化数据时，GridBeat 才会及时把此变化消息发送到对应的北向应用中。</p><h3 id="地址示例" tabindex="-1">地址示例 <a class="header-anchor" href="#地址示例" aria-label="Permalink to “地址示例”">​</a></h3><table tabindex="0"><thead><tr><th style="text-align:left;">IOA</th><th style="text-align:left;">类型</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">100</td><td style="text-align:left;">M_SP_NA_1</td><td style="text-align:left;">读取 IOA 为 100 的一位开关量（单点信息）</td></tr><tr><td style="text-align:left;">1000</td><td style="text-align:left;">C_SC_NA_1</td><td style="text-align:left;">单点遥控，对 IOA 为 1000 的信息对象进行一位开关量进行控制写入 ｜</td></tr><tr><td style="text-align:left;">400</td><td style="text-align:left;">M_ME_NA_1</td><td style="text-align:left;">读取 IOA 为 400 的测量值 ｜</td></tr><tr><td style="text-align:left;">4000</td><td style="text-align:left;">C_SE_NA_1</td><td style="text-align:left;">单点控制，对 IOA 为 4000 的信息对象进行控制写入 ｜</td></tr></tbody></table><p>如上表中 100 与 1000 存在映射关系，则对 1000 进行控制写入后，能从 100 中读到写入的值；或是 400 与 4000 存在映射关系，则对 4000 进行控制写入后，能从 400 中读到写入的值。</p><div class="tip custom-block"><p class="custom-block-title custom-block-title-default">TIP</p><p>支持点位时间以及点位质量的数据点，在北向发送数据时，将会可选的增加对应点位的质量以及时间。</p></div><h2 id="应用场景" tabindex="-1">应用场景 <a class="header-anchor" href="#应用场景" aria-label="Permalink to “应用场景”">​</a></h2><p>您可通过<a href="https://www.freyrscada.com/iec-60870-5-104-Client-Simulator.php" target="_blank" rel="noreferrer">IEC 60870-5-104 Server Simulator</a> 模拟 IEC60870-5-104 设备测试到 GridBeat 的连接，具体步骤，见<a href="./example/server-simulator/simulator.html">IEC 60870-5-104 Server 模拟器连接示例</a>。</p><h2 id="数据监控" tabindex="-1">数据监控 <a class="header-anchor" href="#数据监控" aria-label="Permalink to “数据监控”">​</a></h2><p>完成点位的配置后，您可点击 <strong>监控</strong> -&gt; <strong>数据监控</strong>查看设备信息以及反控设备，具体可参考<a href="./../../../admin/monitoring.html">数据监控</a>。</p>',43)])])}const b=e(r,[["render",d]]);export{p as __pageData,b as default};
