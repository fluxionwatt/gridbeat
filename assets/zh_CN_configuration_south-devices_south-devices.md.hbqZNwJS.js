import{_ as s,c as r,o as i,ah as a,lI as o,lJ as l}from"./chunks/framework.DGOuNAW6.js";const b=JSON.parse('{"title":"连接南向设备","description":"","frontmatter":{},"headers":[],"relativePath":"zh_CN/configuration/south-devices/south-devices.md","filePath":"zh_CN/configuration/south-devices/south-devices.md"}'),n={name:"zh_CN/configuration/south-devices/south-devices.md"};function e(d,t,g,h,p,c){return i(),r("div",null,[...t[0]||(t[0]=[a('<h1 id="连接南向设备" tabindex="-1">连接南向设备 <a class="header-anchor" href="#连接南向设备" aria-label="Permalink to “连接南向设备”">​</a></h1><p>本章将介绍如何通过 GridBeat 对各种工业协议的转化支持，实现对各类南向设备的数据收集。本节将通过 PeakHMI Slave Simulators 来模拟 Modbus TCP 设备，完整演示南向设备添加和配置流程。</p><p>Modbus TCP 是一种基于以太网的 Modbus 协议版本，它使用 TCP/IP 协议进行通信。</p><h2 id="添加插件" tabindex="-1">添加插件 <a class="header-anchor" href="#添加插件" aria-label="Permalink to “添加插件”">​</a></h2><p>创建南向设备节点，用于连接到真实设备或模拟器。</p><p>在 <strong>配置 -&gt; 南向设备</strong>，点击<strong>添加设备</strong>来创建设备节点，您可选择以插件方式添加南向设备，通过<a href="./../templates/templates.html">模版</a>安装和配置插件。这里将以插件方式为例进行演示。</p><ul><li>名称：输入设备名称，例如 <code>modbus-tcp-1</code>。</li><li>插件：GridBeat 支持两类 Modbus TCP 插件，<strong>Modbus TCP</strong> 和 <strong>Modbus TCP QH</strong>，这里将选择 <strong>Modbus TCP</strong> 插件。</li></ul><p>点击<strong>创建</strong>后，将跳转至<strong>设备配置</strong>页面，我们将在这里配置 GridBeat 与设备建立连接所需的参数。您也可点击南向设备卡片上的设备配置图标进入<strong>设备配置</strong>界面。</p><h2 id="设备配置" tabindex="-1">设备配置 <a class="header-anchor" href="#设备配置" aria-label="Permalink to “设备配置”">​</a></h2><p>配置 GridBeat 与设备建立连接所需的参数。</p><div class="tip custom-block"><p class="custom-block-title custom-block-title-default">TIP</p><p>为实现 GridBeat 与南向设备之间的通信，请确认 IP 与 Port 正确设置，防火墙关闭。</p></div><ul><li><strong>连接模式</strong>：选择以太网 TCP 连接时，可以选择 GridBeat 作为 TCP 的客户端或是服务端。</li></ul><ul><li><p><strong>指令发送间隔</strong>：发送每条读写指令之间的等待时间。单位为毫秒。注意：如间隔时间设置较小，某些串口设备在较短时间内接收到连续指令时，可能会丢弃某些指令，因此请合理设置该参数。</p></li><li><p><strong>IP 地址</strong>：填写安装 PeakHMI Slave Simulators 软件的 PC 端 IP 地址，服务端模式中填写本地 IP，客户端模式中填写目标设备 IP。</p></li><li><p><strong>端口号</strong>：填写 Modbus 模拟器所使用的端口，默认为 502 端口。</p></li><li><p><strong>连接超时时间</strong>：单位 ms，默认为 3000，超过设置时间未接收到消息则报错。</p></li><li><p>点击<strong>提交</strong>，完成设备配置，设备卡片自动进入 <strong>运行中</strong> 的工作状态。</p><img src="'+o+'" alt="south-devices" style="zoom:50%;"></li></ul><h2 id="设备卡片" tabindex="-1">设备卡片 <a class="header-anchor" href="#设备卡片" aria-label="Permalink to “设备卡片”">​</a></h2><p>在<strong>南向设备</strong>页，在右上角可以选择列表或卡片展示南向设备，这里将以设备卡片为例介绍其中各选项的含义。</p><ul><li><strong>名称</strong>：用户为南向设备提供的唯一名称。</li><li><strong>设备配置</strong>：点击该按钮进入配置界面，用于设置 GridBeat 连接南向设备所需的参数设置。</li><li><strong>编辑</strong>：在希望更改名称的目标节点，点击<strong>编辑</strong>图标，在弹出的<strong>编辑设备</strong>对话框，修改节点名称。</li><li><strong>数据统计</strong>：统计节点卡片信息。</li><li><strong>DEBUG 日志</strong>：打印当前节点的 DEBUG 级别日志，十分钟后，GridBeat 将恢复打印默认级别日志。</li><li><strong>删除</strong>：从南向设备列表中删除该节点。</li><li><strong>工作状态</strong>：显示设备节点的当前状态，目前节点分为五种工作状态： <ul><li><strong>初始化</strong>：首次添加南向设备后，将进入初始化状态。</li><li><strong>配置中</strong>：进入设备配置，并进入配置状态。</li><li><strong>就绪</strong>：配置成功后，进入就绪状态。</li><li><strong>运行中</strong>：运行设备卡片。</li><li><strong>停止</strong>：停止设备卡片。</li></ul></li><li><strong>工作状态切换按钮</strong>：是否打开与设备的连接： <ul><li>打开：GridBeat与设备/应用建立连接，开始收集数据。</li><li>关闭：断开设备连接，停止收集数据。</li></ul></li><li><strong>连接状态</strong>：显示设备的连接状态。设置组和标签后，GridBeat 会连接设备采集数据，状态自动切换为<strong>已连接</strong>。</li><li><strong>延时</strong>：发送和接收指令之间的时间间隔。</li><li><strong>插件</strong>：该设备使用的插件模块名称。</li></ul><h2 id="设置组和点位" tabindex="-1">设置组和点位 <a class="header-anchor" href="#设置组和点位" aria-label="Permalink to “设置组和点位”">​</a></h2><p>完成南向插件的添加和配置后，要建立设备与 GridBeat 之间的通信，首先应为南向驱动程序添加组和点位。</p><p>点位是分配给一条信息的非分层唯一关键字，其中定义了设备中的数据存储位置和数据操作属性，还包含有关数据的一些元数据信息，如缩放、精确度和读/写属性等。点位将被分配到组中。同一个组的数据以相同的频率进行采集以及上报。创建好组和点位，即可从数据监控中获取点位的实时值。</p><div class="tip custom-block"><p class="custom-block-title custom-block-title-default">TIP</p><p>GridBeat 支持通过 Excel 文件批量实现组和数据标签点位的配置，具体可参考<a href="./../import-export/import-export.html">批量点位配置</a>。</p></div><h3 id="创建组" tabindex="-1">创建组 <a class="header-anchor" href="#创建组" aria-label="Permalink to “创建组”">​</a></h3><p>在<strong>南向设备</strong>页，点击设备卡片/设备列进入<strong>组列表</strong>页。</p><p>点击<strong>创建</strong>来创建组。</p><ul><li><strong>组名称</strong>: 填入组名，如 group-1。</li><li><strong>间隔</strong>：这组点位的采集和上报频率，以毫秒为单位，100 表示每 100 ms 采集一次，整组点位的值上报一次。</li></ul><h3 id="创建点位" tabindex="-1">创建点位 <a class="header-anchor" href="#创建点位" aria-label="Permalink to “创建点位”">​</a></h3><p>在<strong>组列表</strong>页，点击组名称进入<strong>点位列表</strong>页，添加需要采集的设备点位，包括点位地址，点位属性，数据类型等。</p><p>点击<strong>创建</strong>，进入<strong>添加点位</strong>页面并进行如下设置：</p><ul><li><strong>名称</strong>：填写点位名称，例如，tag1；</li><li><strong>属性</strong>：下拉选择点位属性，例如，read，write，subscribe，static，支持配置多个点位类型。 <ul><li>Read：用于读取数据</li><li>Write：用于写入数据</li><li>Subscribe：仅会在数据变化时发送消息。例如，默认数据为 0，当该数据改为 2 时，则将发送消息</li><li>Static：需要在配置时赋值，配置完成后在监控页面中也可以看到对应的赋值</li></ul></li><li><strong>类型</strong>：下拉选择数据类型，例如，INT16、UINT16、INT32、UINT32、INT64、UINT64、FLOAT、DOUBLE、BIT、STRING</li><li><strong>地址</strong>：填写驱动地址，例如，1!40001。1 代表 Modbus 模拟器中设置的点位站点号，40001 代表点位寄存器地址，详细的驱动地址使用说明请参阅 <a href="./modbus-tcp/modbus-tcp.html">Modbus 介绍与使用</a>；</li><li><strong>乘系数</strong>：默认不填；当点位属性包含 write 时，支持设置乘系数，此时 <code>设备值 * 乘系数 = 显示值</code>，如点位乘系数值为 0.1，写入设备中的值为 234，页面显示值为 23.4。</li><li><strong>精度</strong>：点位类型选择 <code>float</code> 或 <code>double</code> 时配置精度，精度范围为 0 ～17</li><li><strong>描述</strong>：默认不填。</li></ul><div class="tip custom-block"><p class="custom-block-title custom-block-title-default">TIP</p><p>点位创建完成后，设备卡片的工作状态处于 <strong>运行中</strong>，连接状态应处于<strong>已连接</strong>。若此时连接状态仍然处于<strong>未连接</strong> 的状态，请先在 GridBeat 运行环境终端执行以下指令，以确认运行环境能否访问到到对应的 IP 及端口：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">telnet</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">运行</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Modbus</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 模拟器</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PC</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 端的</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> I</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">P</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 502</span></span></code></pre></div></div><h2 id="数据监控" tabindex="-1">数据监控 <a class="header-anchor" href="#数据监控" aria-label="Permalink to “数据监控”">​</a></h2><p>完成点位的配置后，您可点击 <strong>监控</strong> -&gt; <strong>数据监控</strong>查看设备信息以及反控设备，具体可参考<a href="./../../admin/monitoring.html">数据监控</a>。</p><h2 id="运行与维护" tabindex="-1">运行与维护 <a class="header-anchor" href="#运行与维护" aria-label="Permalink to “运行与维护”">​</a></h2><h3 id="数据统计" tabindex="-1">数据统计 <a class="header-anchor" href="#数据统计" aria-label="Permalink to “数据统计”">​</a></h3><p>在设备卡片或设备列，您可点击数据统计图表查看及应用运行情况、接受和发送的数据情况</p><p><img src="'+l+'" alt="south_statistics"></p><p>其中关键字段说明如下：</p><table tabindex="0"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>last_rtt_ms</td><td>收发一次指令的时间间隔，以毫秒为单位</td></tr><tr><td>send_bytes</td><td>发送指令的总字节数</td></tr><tr><td>recv_bytes</td><td>接收指令的总字节数</td></tr><tr><td>tag_reads_total</td><td>读取点位的总指令数，包括读失败</td></tr><tr><td>tag_read_errors_total</td><td>读取点位失败的总指令数</td></tr><tr><td>group_tags_total</td><td>组的总点位数</td></tr><tr><td>group_last_send_msgs</td><td>调用一次 group timer 发送的消息数</td></tr><tr><td>group_last_timer_ms</td><td>调用一次 group timer 的时间，以毫秒为单位</td></tr><tr><td>link_state</td><td>节点连接状态 <br>DISCONNECTED = 0<br>CONNECTED = 1</td></tr><tr><td>running_state</td><td>节点状态 <br>INIT = 1<br>READY = 2<br>RUNNING = 3<br>STOPPED = 4</td></tr></tbody></table><h3 id="故障诊断" tabindex="-1">故障诊断 <a class="header-anchor" href="#故障诊断" aria-label="Permalink to “故障诊断”">​</a></h3><p>如果设备运行出现任何问题，您可点击 DEBUG 日志图表，此时系统将自动打印该节点的 DEBUG 级别日志，十分钟后将切回系统默认级别日志。稍后，您可点击页面顶部功能栏的<strong>系统信息</strong> -&gt; <strong>日志</strong>查看日志，并进行故障诊断。有关系统日志的详细解析，见<a href="./../../admin/log-management.html">管理日志</a>。</p>',39)])])}const k=s(n,[["render",e]]);export{b as __pageData,k as default};
