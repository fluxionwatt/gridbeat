import{_ as a,c as r,o as d,ah as e}from"./chunks/framework.DGOuNAW6.js";const c=JSON.parse('{"title":"DataStorage","description":"","frontmatter":{},"headers":[],"relativePath":"zh_CN/configuration/north-apps/DataStorage/DataStorage.md","filePath":"zh_CN/configuration/north-apps/DataStorage/DataStorage.md"}'),o={name:"zh_CN/configuration/north-apps/DataStorage/DataStorage.md"};function h(s,t,n,l,i,g){return d(),r("div",null,[...t[0]||(t[0]=[e('<h1 id="datastorage" tabindex="-1">DataStorage <a class="header-anchor" href="#datastorage" aria-label="Permalink to “DataStorage”">​</a></h1><p>DataStorage 北向插件使用 <a href="https://arrow.apache.org/docs/format/FlightSql.html#arrow-flight-sql" target="_blank" rel="noreferrer">Arrow Flight SQL</a> 写入数据到 <a href="https://docs.datalayers.cn/datalayers/latest/" target="_blank" rel="noreferrer">Datalayers</a> 时序数据库，它为 GridBeatEX 增加了时序数据的存储能力。</p><p>GridBeatEX 会在启动时创建一个 <em>DataStorage</em> 单例节点，用户不能直接使用该插件创建或删除节点。 您可以在<strong>北向应用</strong>页签中看到 <em>DataStorage</em> 节点。</p><h2 id="应用配置" tabindex="-1">应用配置 <a class="header-anchor" href="#应用配置" aria-label="Permalink to “应用配置”">​</a></h2><p>以下是使用 DataStorage 插件配置节点时可用的参数：</p><table tabindex="0"><thead><tr><th>字段</th><th>说明</th></tr></thead><tbody><tr><td><strong>服务器地址</strong></td><td>Datalayers 服务器的 ip 地址</td></tr><tr><td><strong>服务器端口</strong></td><td>Datalayers gRPC 服务的端口</td></tr><tr><td><strong>用户名</strong></td><td>Datalayers 用户名</td></tr><tr><td><strong>密码</strong></td><td>Datalayers 密码</td></tr></tbody></table><h2 id="添加订阅" tabindex="-1">添加订阅 <a class="header-anchor" href="#添加订阅" aria-label="Permalink to “添加订阅”">​</a></h2><p>完成插件的添加和配置后，通过订阅南向设备实现数据的存储。</p><p>在<strong>北向应用</strong>页，点击设备卡片/设备列进入<strong>组列表</strong>页。点击<strong>添加订阅</strong>，完成南向设备和采集组的添加。订阅完成后，DataStorage 节点将开始接收南向数据，并将数据存储到 Datalayers 时序数据库中。</p><h2 id="数据存储" tabindex="-1">数据存储 <a class="header-anchor" href="#数据存储" aria-label="Permalink to “数据存储”">​</a></h2><p>DataStorage 在传输过程中使用 Arrow 的列存格式，在数据传输过程将完全避免序列化/反序列化操作，可彻底消除序列化/反序列化带来时间及性能损耗、提升系统的吞吐能力。</p><h2 id="运行与维护" tabindex="-1">运行与维护 <a class="header-anchor" href="#运行与维护" aria-label="Permalink to “运行与维护”">​</a></h2><p>在设备卡片或设备列，您可点击数据统计图表查看及应用运行情况、接受和发送的数据情况。</p><p>其中<strong>缓存队列大小</strong>表示，当前 DataStorage 插件数据存储时使用的缓存队列大小值。</p><p>其中<strong>最大缓存队列大小</strong>表示，DataStorage 插件数据存储时使用的缓存队列的历史最大值。</p><p>其中<strong>丢弃消息数</strong>表示，DataStorage 插件数据存储时，由于数据吞吐量过大，超过了缓存队列的最大值1000时，导致的数据丢失数量。</p><h2 id="性能指标" tabindex="-1">性能指标 <a class="header-anchor" href="#性能指标" aria-label="Permalink to “性能指标”">​</a></h2><p>推荐 GridBeatEX 边端存储点位不超过1w个。</p><h3 id="datastorage-插件性能指标" tabindex="-1">DataStorage 插件性能指标 <a class="header-anchor" href="#datastorage-插件性能指标" aria-label="Permalink to “DataStorage 插件性能指标”">​</a></h3><table tabindex="0"><thead><tr><th>场景</th><th>点位数</th><th>组间间隔 (ms)</th><th>CPU 最大使用率 (%)</th><th>内存占用 (MB)</th><th>最大缓存队列长度</th></tr></thead><tbody><tr><td>1</td><td>3,000</td><td>1000</td><td>10.4</td><td>79</td><td>1</td></tr><tr><td>2</td><td>10,000</td><td>1000</td><td>35</td><td>197</td><td>1</td></tr><tr><td>3</td><td>10,000</td><td>100</td><td>145</td><td>228</td><td>1</td></tr></tbody></table><h3 id="datalayers-数据库性能指标" tabindex="-1">Datalayers 数据库性能指标 <a class="header-anchor" href="#datalayers-数据库性能指标" aria-label="Permalink to “Datalayers 数据库性能指标”">​</a></h3><table tabindex="0"><thead><tr><th>场景</th><th>点位数</th><th>组间间隔 (ms)</th><th>CPU 最大使用率 (%)</th><th>内存占用 (MB)</th><th>磁盘写入 (MB/s)</th><th>查询响应时间 (ms)</th></tr></thead><tbody><tr><td>1</td><td>3,000</td><td>1000</td><td>2.6</td><td>157</td><td>0.093</td><td>10</td></tr><tr><td>2</td><td>10,000</td><td>1000</td><td>4.5</td><td>217</td><td>0.314</td><td>15</td></tr><tr><td>3</td><td>10,000</td><td>100</td><td>145</td><td>296</td><td>1.59</td><td>22</td></tr></tbody></table>',22)])])}const b=a(o,[["render",h]]);export{c as __pageData,b as default};
