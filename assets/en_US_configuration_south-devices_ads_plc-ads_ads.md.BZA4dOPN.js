import{_ as t,c as i,o as a,ah as n,d1 as r,d2 as o,d3 as d,d4 as s,d5 as l,d6 as g,d7 as h,d8 as c,d9 as f,da as u,db as b,dc as p,dd as m,de as T,df as w,dg as C,dh as A,di as D,dj as _,dk as P,dl as x,dm as y}from"./chunks/framework.DGOuNAW6.js";const I=JSON.parse('{"title":"Data Acquisition with Beckhoff ADS Plugin","description":"","frontmatter":{},"headers":[],"relativePath":"en_US/configuration/south-devices/ads/plc-ads/ads.md","filePath":"en_US/configuration/south-devices/ads/plc-ads/ads.md"}'),S={name:"en_US/configuration/south-devices/ads/plc-ads/ads.md"};function k(v,e,G,B,F,L){return a(),i("div",null,[...e[0]||(e[0]=[n('<h1 id="data-acquisition-with-beckhoff-ads-plugin" tabindex="-1">Data Acquisition with Beckhoff ADS Plugin <a class="header-anchor" href="#data-acquisition-with-beckhoff-ads-plugin" aria-label="Permalink to “Data Acquisition with Beckhoff ADS Plugin”">​</a></h1><p>In this tutorial, we introduce how to collect data from Beckhoff software PLCs using the GridBeat ADS plugin.</p><h2 id="environment-setup" tabindex="-1">Environment Setup <a class="header-anchor" href="#environment-setup" aria-label="Permalink to “Environment Setup”">​</a></h2><p>We use two PCs connected to a local area network in this tutorial.</p><ul><li>One is a Linux machine with GridBeat installed. Consult the <a href="./../../../../installation/installation.html">the installation instruction</a> on how to install GridBeat.</li><li>The other is a Windows machine with TwinCAT 3 installed. Refer to the <a href="https://www.beckhoff.com/en-us/products/automation/twincat" target="_blank" rel="noreferrer">Beckhoff TwinCAT website</a> to download and install TwinCAT.</li></ul><table tabindex="0"><thead><tr><th></th><th>PC 1</th><th>PC 2</th></tr></thead><tbody><tr><td>Operating System</td><td>Linux</td><td>Windows</td></tr><tr><td>IP address</td><td>192.168.1.152</td><td>192.168.1.107</td></tr><tr><td>AMS Net ID</td><td>192.168.1.152.1.1</td><td>192.168.1.107.1.1</td></tr><tr><td>Software</td><td>GridBeat</td><td>TwinCAT 3</td></tr><tr><td>Network</td><td>Connected</td><td>Connected</td></tr></tbody></table><h2 id="configure-twincat" tabindex="-1">Configure TwinCAT <a class="header-anchor" href="#configure-twincat" aria-label="Permalink to “Configure TwinCAT”">​</a></h2><p>Before GridBeat and the TwinCAT PLC can communicate with each other, we first need to add a static route for GridBeat in TwinCAT. We also need to find the AMS Net ID of the TwinCAT PLC and the index group and index offset of the variables.</p><h3 id="add-static-route-in-twincat" tabindex="-1">Add Static Route in TwinCAT <a class="header-anchor" href="#add-static-route-in-twincat" aria-label="Permalink to “Add Static Route in TwinCAT”">​</a></h3><ol><li>Open the <strong>TwinCAT Static Routes</strong> dialog box.</li></ol><figure align="center"><img src="'+r+'" style="border:thin solid #E0DCD9;width:60%;" alt="Open the TwinCAT static routes dialog"><figcaption align="center"><sub><b>Fig.1 - Open the TwinCAT static routes dialog</b></sub></figcaption></figure> 2. Click **Add**. <figure align="center"><img src="'+o+'" style="border:thin solid #E0DCD9;width:60%;" alt="TwinCAT static routes dialog"><figcaption align="center"><sub><b>Fig.2 - TwinCAT static routes dialog</b></sub></figcaption></figure> 3. Provide the information as highlighted in the following image. Note that the **AmsNetId** is the IP address of the GridBeat PC appended with &quot;.1.1&quot;. <figure align="center"><img src="'+d+'" style="border:thin solid #E0DCD9;width:60%;" alt="TwinCAT add route dialog"><figcaption align="center"><sub><b>Fig.3 - TwinCAT add route dialog</b></sub></figcaption></figure><ol start="4"><li>A successfully added route is shown as follows.</li></ol><figure align="center"><img src="'+s+'" style="border:thin solid #E0DCD9;width:60%;" alt="TwinCAT static routes dialog updated"><figcaption align="center"><sub><b>Fig.4 - TwinCAT static routes dialog updated</b></sub></figcaption></figure><h3 id="get-ams-net-id-and-port-number" tabindex="-1">Get AMS Net ID and Port Number <a class="header-anchor" href="#get-ams-net-id-and-port-number" aria-label="Permalink to “Get AMS Net ID and Port Number”">​</a></h3><ol><li>Open the <strong>TwinCAT System</strong> dialog to show the AMS Net ID.</li></ol><figure align="center"><img src="'+l+'" style="border:thin solid #E0DCD9;width:60%;" alt="TwinCAT system dialog"><figcaption align="center"><sub><b>Fig.5 - TwinCAT system dialog</b></sub></figcaption></figure> 2. By default, TwinCAT PLC port number is 851. <figure align="center"><img src="'+g+'" style="border:thin solid #E0DCD9;width:60%;" alt="TwinCAT PLC project tab"><figcaption align="center"><sub><b>Fig.6 - TwinCAT PLC project tab</b></sub></figcaption></figure><h3 id="get-index-group-and-index-offset-of-variables" tabindex="-1">Get Index Group and Index Offset of Variables <a class="header-anchor" href="#get-index-group-and-index-offset-of-variables" aria-label="Permalink to “Get Index Group and Index Offset of Variables”">​</a></h3><p>We use the following TwinCAT PLC program, which defines enough variables for testing in this tutorial.</p><figure align="center"><img src="'+h+'" style="border:thin solid #E0DCD9;width:60%;" alt="TwinCAT PLC project main program"><figcaption align="center"><sub><b>Fig.7 - TwinCAT PLC project main program</b></sub></figcaption></figure><h4 id="find-the-index-group" tabindex="-1">Find the Index Group <a class="header-anchor" href="#find-the-index-group" aria-label="Permalink to “Find the Index Group”">​</a></h4><p>The <a href="https://infosys.beckhoff.com/english.php?content=../content/1033/tcadscommon/12495369867.html" target="_blank" rel="noreferrer">Beckhoff index group/offset page</a> lists the index group to access the PLC memory range. For the %MW field, the index group is 0x4020. For the %MX field, the index group is 0x4021. For the variables <em>b、i8、u8、i16、u16、i32、u32、i64、u64、f32、f64、str</em> defined in the main program, the index group is 0x4040.</p><figure align="center"><img src="'+c+'" style="border:thin solid #E0DCD9;width:60%;" alt="TwinCAT index group table"><figcaption align="center"><sub><b>Fig.8 - TwinCAT index group table</b></sub></figcaption></figure><h4 id="find-the-index-offset" tabindex="-1">Find the Index Offset <a class="header-anchor" href="#find-the-index-offset" aria-label="Permalink to “Find the Index Offset”">​</a></h4><p>Open the TwinCAT PLC data area tab to find the index offset of the variables.</p><figure align="center"><img src="'+f+'" style="border:thin solid #E0DCD9;width:60%;" alt="TwinCAT PLC data area tab"><figcaption align="center"><sub><b>Fig.9 - TwinCAT PLC data area tab</b></sub></figcaption></figure><h4 id="get-the-index-group-offset-by-tpy-file" tabindex="-1">Get the Index Group/Offset by TPY File <a class="header-anchor" href="#get-the-index-group-offset-by-tpy-file" aria-label="Permalink to “Get the Index Group/Offset by TPY File”">​</a></h4><p>We could also find the index group and index offset through the TPY file.</p><ol><li>Ensure <strong>TPY File</strong> is enabled.</li></ol><figure align="center"><img src="'+u+'" style="border:thin solid #E0DCD9;width:60%;" alt="TwinCAT PLC project setting tab"><figcaption align="center"><sub><b>Fig.10 - TwinCAT PLC project setting tab</b></sub></figcaption></figure><ol start="2"><li>Open the TPY file in the TwinCAT project directory.</li></ol><figure align="center"><img src="'+b+'" style="border:thin solid #E0DCD9;width:60%;" alt="TwinCAT PLC project tpy file path"><figcaption align="center"><sub><b>Fig.11 - TwinCAT PLC project TPY file path</b></sub></figcaption></figure><ol start="3"><li>The TPY file contains the index group and index offset of each variable defined in the PLC program.</li></ol><figure align="center"><img src="'+p+'" style="border:thin solid #E0DCD9;width:60%;" alt="TwinCAT PLC project tpy file content"><figcaption align="center"><sub><b>Fig.12 - TwinCAT PLC project TPY file content</b></sub></figcaption></figure><h2 id="configure-gridbeat" tabindex="-1">Configure GridBeat <a class="header-anchor" href="#configure-gridbeat" aria-label="Permalink to “Configure GridBeat”">​</a></h2><h3 id="add-ads-south-node" tabindex="-1">Add ADS South Node <a class="header-anchor" href="#add-ads-south-node" aria-label="Permalink to “Add ADS South Node”">​</a></h3><p>In the GridBeat dashboard, click <strong>South Devices -&gt; Add Device</strong> to add an ADS node.</p><figure align="center"><img src="'+m+'" style="border:thin solid #E0DCD9;width:60%;" alt="Add ADS south device in GridBeat dashboard"><figcaption align="center"><sub><b>Fig.13 - Add ADS south device in GridBeat dashboard</b></sub></figcaption></figure><h3 id="configure-ads-node" tabindex="-1">Configure ADS Node <a class="header-anchor" href="#configure-ads-node" aria-label="Permalink to “Configure ADS Node”">​</a></h3><p>Click the node configuration icon to configure the newly created ADS node.</p><figure align="center"><img src="'+T+'" style="border:thin solid #E0DCD9;width:60%;" alt="Configure ADS node in GridBeat dashboard"><figcaption align="center"><sub><b>Fig.14 - Configure ADS node in GridBeat dashboard</b></sub></figcaption></figure><h3 id="add-tags-to-the-ads-node" tabindex="-1">Add Tags to the ADS Node <a class="header-anchor" href="#add-tags-to-the-ads-node" aria-label="Permalink to “Add Tags to the ADS Node”">​</a></h3><p>For each variable in the aforementioned TwinCAT PLC program, we add a corresponding tag to the GridBeat ADS node. The [Beckhoff data types] page lists the size of the data types. Together with the program source code we could derive the data types of the tags.</p><figure align="center"><img src="'+w+'" style="border:thin solid #E0DCD9;width:60%;" alt="TwinCAT PLC main program"><figcaption align="center"><sub><b>Fig.15 - TwinCAT PLC main program</b></sub></figcaption></figure><p>For tag addresses, the index offset component is shown in the TwinCAT PLC data area tab.</p><figure align="center"><img src="'+C+'" style="border:thin solid #E0DCD9;width:60%;" alt="TwinCAT PLC data area tab"><figcaption align="center"><sub><b>Fig.16 - TwinCAT PLC data area tab</b></sub></figcaption></figure><p>The following figure shows all added tags in the ADS node.</p><figure align="center"><img src="'+A+'" style="border:thin solid #E0DCD9;width:60%;" alt="GridBeat version 2.3.0 upload topic setting"><figcaption align="center"><sub><b>Fig.17 - ADS node tags in GridBeat dashboard</b></sub></figcaption></figure><h2 id="monitor-data" tabindex="-1">Monitor Data <a class="header-anchor" href="#monitor-data" aria-label="Permalink to “Monitor Data”">​</a></h2><h3 id="read-tags" tabindex="-1">Read Tags <a class="header-anchor" href="#read-tags" aria-label="Permalink to “Read Tags”">​</a></h3><p>Once the TwinCAT PLC is in running mode, we could see the variable values in the interface.</p><figure align="center"><img src="'+D+'" style="border:thin solid #E0DCD9;width:60%;" alt="TwinCAT variable values in running mode"><figcaption align="center"><sub><b>Fig.18 - TwinCAT variable values in running mode</b></sub></figcaption></figure><p>In the GridBeat dashboard, click <strong>Monitoring -&gt; Data Monitoring</strong>, check whether the tag values are read correctly.</p><figure align="center"><img src="'+_+'" style="border:thin solid #E0DCD9;width:60%;" alt="GridBeat data monitoring tab"><figcaption align="center"><sub><b>Fig.19 - GridBeat data monitoring tab</b></sub></figcaption></figure><h3 id="write-tags" tabindex="-1">Write Tags <a class="header-anchor" href="#write-tags" aria-label="Permalink to “Write Tags”">​</a></h3><p>In the GridBeat <strong>Data Monitoring</strong> tab, click <strong>Write</strong> on the <em>main.MXtest1</em> tag to write a true value.</p><figure align="center"><img src="'+P+'" style="border:thin solid #E0DCD9;width:60%;" alt="GridBeat write main.MXtest1"><figcaption align="center"><sub><b>Fig.20 - GridBeat write main.MXtest1</b></sub></figcaption></figure><p>Click <strong>Write</strong> on the <em>main.MWtest1</em> tag to write the value <em>6666</em>.</p><figure align="center"><img src="'+x+'" style="border:thin solid #E0DCD9;width:60%;" alt="GridBeat write main.MWtest1"><figcaption align="center"><sub><b>Fig.21 - GridBeat write main.MWtest1</b></sub></figcaption></figure><p>After a successful write, we could see that variable values do update in TwinCAT.</p><figure align="center"><img src="'+y+'" style="border:thin solid #E0DCD9;width:60%;" alt="TwinCAT variable values updated"><figcaption align="center"><sub><b>Fig.22 - TwinCAT variable values updated</b></sub></figcaption></figure>',66)])])}const N=t(S,[["render",k]]);export{I as __pageData,N as default};
