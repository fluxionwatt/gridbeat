import{_ as a,c as e,o as s,ah as i,am as l,an as n,ao as o,ap as r}from"./chunks/framework.D2dsaVOY.js";const b=JSON.parse('{"title":"Log Management","description":"","frontmatter":{},"headers":[],"relativePath":"en_US/admin/log-management.md","filePath":"en_US/admin/log-management.md"}'),d={name:"en_US/admin/log-management.md"};function h(p,t,g,u,c,k){return s(),e("div",null,[...t[0]||(t[0]=[i('<h1 id="log-management" tabindex="-1">Log Management <a class="header-anchor" href="#log-management" aria-label="Permalink to “Log Management”">​</a></h1><h2 id="download-logs" tabindex="-1">Download Logs <a class="header-anchor" href="#download-logs" aria-label="Permalink to “Download Logs”">​</a></h2><p>GridBeat supports one-click download of all log filed on web pages in version 2.3, as shown below.</p><p><img src="'+l+'" alt="download_log"></p><p>The log download function bundles the /gridbeat/build/logs folder into the gridbeat_logs.tar.gz file and downloads it to a web page. The file contains all the created driver and gridbeat log files. Directory-level examples of files are shown below.</p><img src="'+n+'" alt="gridbeat_logs" style="zoom:50%;"><ul><li>data-stream-processing.log: data processing configuration;</li><li>dlt645.log: northbound application configuration;</li><li>modbus-plus-tcp.log: southbound application configuration;</li><li>gridbeat.log: log of GridBeat.</li></ul><h2 id="output-debug-log-of-certain-node" tabindex="-1">Output Debug Log of Certain Node <a class="header-anchor" href="#output-debug-log-of-certain-node" aria-label="Permalink to “Output Debug Log of Certain Node”">​</a></h2><p>GridBeat supports the setting of printing debug logs of a node and automatically switching back to the default log level after approximately ten minutes. The Settings for each node are independent of each other.</p><p>Each node&#39;s <strong>more</strong> operation button has a <strong>DEBUG log</strong> operation button, as shown below.</p><p><img src="'+o+'" alt="debug_log"></p><p>When you click this button, a prompt like the one below appears.</p><p><img src="'+r+`" alt="debug_log_tip"></p><p>In this case, the node starts to print debug logs. You can download the logs about ten minutes later to view the logs of the node, or view the logs under /build/logs.</p><div class="tip custom-block"><p class="custom-block-title custom-block-title-default">TIP</p><p>When the node debug log is printed, the gridbeat log will also be printed, and the default log level will be automatically switched back after ten minutes.</p></div><h2 id="zlog-conf" tabindex="-1">zlog.conf <a class="header-anchor" href="#zlog-conf" aria-label="Permalink to “zlog.conf”">​</a></h2><p>Explanation of the log configuration file. In addition, there is also dev.conf, which is used for development debugging, printing logs, and outputting them to the terminal. When launching GridBeat, add <strong>--log</strong> parameter to call dev.conf</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[global]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> perms</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 666</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[formats]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">simple</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;%d [%V] %f:%L %m%n&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[rules]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     &quot;./logs/%c.log&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, 50MB </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./logs/%c.#2s.log&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">simple</span></span></code></pre></div><p>The configuration file is divided into three sections: [global], [formats], [rules].</p><h3 id="global" tabindex="-1">Global <a class="header-anchor" href="#global" aria-label="Permalink to “Global”">​</a></h3><p>file perms: specify the default access permissions when creating a file.</p><ul><li>600: only the owner has read and write permissions.</li><li>644: only the owner has read and write permissions, while group users and other users have only read permissions.</li><li>700: only the owner has read, write and execute permissions.</li><li>755: the owner has read, write and execute permissions, while group users and other users have only read and execute permissions.</li><li>711: the owner has read, write and execute permissions, while group users and other users have only execute permissions.</li><li>666: all users have read and write permissions for the file.</li><li>777: all users have read, write and execute permissions.</li></ul><h3 id="formats" tabindex="-1">Formats <a class="header-anchor" href="#formats" aria-label="Permalink to “Formats”">​</a></h3><p>Conversion format string: Conversion format string is similar to C&#39;s printf function. It is possible to customize the format of the logs. The method is as follows: specify the name of the format with format_name, replace &#39;your format&#39; with your own custom format, which should be enclosed in quotes.</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">format_name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;your format&quot;</span></span></code></pre></div><ul><li>%d, print the log time;</li><li>%V, log level, in uppercase;</li><li>%f, source code file name;</li><li>%L, source code line number;</li><li>%m, user log, the log entered by the user from the zlog function;</li><li>%n, newline character.</li></ul><h3 id="rules" tabindex="-1">Rules <a class="header-anchor" href="#rules" aria-label="Permalink to “Rules”">​</a></h3><p>Rules describe how logs are filtered, formatted, and outputted. Grammar:</p><blockquote><p>(category).(level) (output),(options, optional); (format name, optional)</p></blockquote><h4 id="category" tabindex="-1">category <a class="header-anchor" href="#category" aria-label="Permalink to “category”">​</a></h4><p>Classification levels.</p><table tabindex="0"><thead><tr><th>Summary</th><th>Configuration file rule classification</th><th>Matching code classification</th><th>Non-matching code classification</th></tr></thead><tbody><tr><td>*Match all</td><td>*.*</td><td>aa，aa_bb，aa_cc，yy ...</td><td>NONE</td></tr><tr><td>Categories ending with _ match the current and subcategories.</td><td>aa_.*</td><td>aa, aa_bb, aa_cc, aa_bb_cc</td><td>xx, yy</td></tr><tr><td>Categories not ending with _ match the exact category name.</td><td>aa.*</td><td>aa</td><td>aa_bb, aa_cc, aa_bb_cc</td></tr><tr><td>!Match categories with no rules found.</td><td>!.*</td><td>xx</td><td>aa</td></tr></tbody></table><h4 id="level" tabindex="-1">level <a class="header-anchor" href="#level" aria-label="Permalink to “level”">​</a></h4><p>zlog has six default levels: &quot;DEBUG&quot;, &quot;INFO&quot;, &quot;NOTICE&quot;, &quot;WARN&quot;, &quot;ERROR&quot;, &quot;FATAL&quot;. For example, *.DEBUG means any log level greater than or equal to DEBUG will be output.</p><table tabindex="0"><thead><tr><th>Expression</th><th>Meaning</th></tr></thead><tbody><tr><td>*.*</td><td>All levels</td></tr><tr><td>*.debug</td><td>Code internal level &gt;= debug</td></tr><tr><td>*.=debug</td><td>Code internal level == debug</td></tr><tr><td>*.!debug</td><td>Code internal level != debug</td></tr></tbody></table><h4 id="output-options-optional" tabindex="-1">(output),(options, optional); <a class="header-anchor" href="#output-options-optional" aria-label="Permalink to “(output),(options, optional);”">​</a></h4><p>[output],[options, optional];</p><table tabindex="0"><thead><tr><th>Action</th><th>Output Field</th><th>Additional Options</th></tr></thead><tbody><tr><td>Standard output</td><td>&gt;stdout</td><td>N/A</td></tr><tr><td>Standard error output</td><td>&gt;stderr</td><td>N/A</td></tr><tr><td>Syslog output</td><td>&gt;syslog</td><td>Syslog facility (facility): LOG_USER (default), LOG_LOCAL [0-7] Required</td></tr><tr><td>Pipe output</td><td>|cat</td><td>N/A</td></tr><tr><td>File</td><td>&quot;File path&quot;</td><td>File rotation, 10M * 3 ～ &quot;press.#r.log&quot;. For example, &quot;./logs/%c.log&quot;, 50MB * 1 ~ &quot;./logs/%c.#2s.log&quot; means rotate every 50M, #2s means the length of the serial number is at least 2 digits, starting from 00.</td></tr><tr><td>Synchronous IO file</td><td>-&quot;File path&quot;</td><td>N/A</td></tr><tr><td>User-defined output</td><td>$name</td><td>&quot;path&quot; is used for record output, dynamic or static.</td></tr></tbody></table><p>For example, only output logs to syslog.</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[global]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> perms</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 666</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[formats]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">simple</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;%d [%V] %f:%L %m%n&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[rules]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    	&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">syslog, LOG_LOCAL0; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">simple</span></span></code></pre></div><h4 id="format-name-optional" tabindex="-1">(format name, optional) <a class="header-anchor" href="#format-name-optional" aria-label="Permalink to “(format name, optional)”">​</a></h4><p>[format name, optional]</p>`,42)])])}const f=a(d,[["render",h]]);export{b as __pageData,f as default};
